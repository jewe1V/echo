
# Echo

Блог-платформа на serverless архитектуре

---

## Особенности

1. Реализован CRUD над постами
2. Фронтенд на React, билд хостится в Object Storage
3. Pyhton для взаимодействия с БД через Cloud Functions
4. База данных YDB
5. Object Storage для хранения изображений постов
6. Cloud Functions
7. API Gateway для всех запросов
8. Настройка виртуальной сети Yandex Cloud
9. Terrafrom для развертывания

---

## Возможности

- Регистрация и авторизация (JWT)
- CRUD постов
- Загрузка изображений
- Лайки
- Адаптивный интерфейс

---

## Деплой и настройка

В .env.example описан шаблон для указания значений переменных окружения.

Запуск развертывания 

Для Бэкенда:

```
export $(grep -v '^#' .env.example | xargs) 

terraform init 

terraform plan 

terraform apply
```

Для фронтенда: 

```
cd frontend

npm install

npm run build

И загрузка архива в Object Storage
```

---

## Эндпоинты

### Аутентификация
- `POST /auth/register` — регистрация
- `POST /auth/login` — вход

### Посты
- `GET /posts` — получить все посты
- `POST /posts/create` — создать пост
- `PUT /posts/{post_id}/edit` — редактировать пост
- `DELETE /posts/{post_id}/delete` — удалить пост
- `POST /posts/{post_id}/like` — лайкнуть пост

---

## Стоимость эксплуатации (примерно, руб/мес)

| Компонент            | Базовый | Стартап | Бизнес  | Энтерпрайз |
|----------------------|---------|---------|---------|------------|
| Пользователей        | 1,000   | 10,000  | 100,000 | 1,000,000  |
| API Gateway          | 100     | 500     | 2,000   | 10,000     |
| Serverless Functions | 150     | 750     | 3,000   | 15,000     |
| YDB (serverless)     | 200     | 1,500   | 12,000  | 80,000     |
| Object Storage       | 50      | 200     | 1,000   | 5,000      |
| Исходящий трафик     | 100     | 1,000   | 10,000  | 50,000     |
| **Итого**            | ~600    | ~3,950  | ~28,000 | ~160,000   |

### Детализация
- **API Gateway**: 1 млн запросов — ~100 руб, +10 руб за каждые 100 тыс. запросов, до 10 RPS бесплатно
- **Serverless Functions**: 1 млн вызовов — ~120 руб, 2.50 руб/GB-час, 128MB функция — ~0.32 руб/час
- **YDB**: 1 RU — ~1.20 руб/млн, хранение — 2.20 руб/GB/мес, типичный запрос — 1-5 RU
- **Object Storage**: хранение — 2.08 руб/GB/мес, операции — 0.30 руб/10 тыс., трафик — 1.30 руб/GB

Для экономии ресурсов в будущем можно будет настроить кэширование данных

